{{ $news := where (where $.Site.Pages "Section" "news" ) "Kind" "page" }}
{{ $news_to_show := slice }}

{{ if .IsHome }}
    {{ $news_to_show = $news_to_show | append (first 3 $news) }}
{{ else }}
    {{ $news_to_show = $news_to_show | append $news }}
{{ end }}

<div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-2 {{ if not .IsHome }}g-lg-3{{ end }}">
    {{ range $news_to_show }}
    <div class="col p-2">
        <div class="bg-news">
            <div aria-hidden="true">
                <a href="{{ .Page.RelPermalink }}">
                    <img class="img-fluid" src="{{ .Page.Params.thumbnail }}"
                        alt="Thumbnail for {{ .Name }}">
                </a>
            </div>
            <div class="mt-2">
                <small>{{ .Date | time.Format ":date_long" }}</small>
            </div>
            <div>
                <h6 class="my-1"><a class="dark-blue" href="{{ .Page.RelPermalink }}">{{ .Title }}</a></h6>
            </div>
        </div>
    </div>
    {{ end }}
</div>
